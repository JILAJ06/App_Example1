<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->

<div class="music-player-container" *ngIf="currentSong$ | async as currentSong; else noSong">
  
  <div class="main-player">
    <img [src]="currentSong.coverSrc" alt="Cover de {{ currentSong.album }}" class="album-cover">
    
    <div class="song-info">
      <h2>{{ currentSong.title }}</h2>
      <p>{{ currentSong.artist }} - {{ currentSong.album }} ({{ currentSong.year }})</p>
    </div>

    <div class="controls">
      <button class="control-btn" (click)="prevSong()">
        <i class="material-icons">skip_previous</i>
      </button>

      <button class="control-btn play-pause-btn" (click)="togglePlayPause()">
        <i class="material-icons">{{ (isPlaying$ | async) ? 'pause' : 'play_arrow' }}</i>
      </button>

      <button class="control-btn" (click)="nextSong()">
        <i class="material-icons">skip_next</i>
      </button>
    </div>

    <div class="progress-bar-container">
      <span class="time">{{ formatTime( (currentTime$ | async) ?? 0) }}</span>
      <input 
        type="range" 
        class="progress-bar"
        [max]="(duration$ | async) ?? 0"
        [value]="(currentTime$ | async) ?? 0"
        (input)="onSeek($event)">
      <span class="time">{{ formatTime( (duration$ | async) ?? 0) }}</span>
    </div>

  </div>

  <div class="playlist">
    <h3>Lista de Reproducción</h3>
    <ul>
      <li 
        *ngFor="let song of playlist" 
        (click)="play(song)"
        [class.active]="song.id === currentSong.id">
        <span class="song-title">{{ song.title }}</span>
        <span class="song-artist">{{ song.artist }}</span>
      </li>
    </ul>
  </div>

</div>

<ng-template #noSong>
  <div class="no-song-selected">
    <h1>APP_MUSICA</h1>
    <p>Selecciona una canción de la lista para comenzar.</p>
    <div class="playlist initial-playlist">
      <h3>Lista de Reproducción</h3>
      <ul>
        <li *ngFor="let song of playlist" (click)="play(song)">
          <span class="song-title">{{ song.title }}</span>
          <span class="song-artist">{{ song.artist }}</span>
        </li>
      </ul>
    </div>
  </div>
</ng-template>